"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1535],{877:(e,t,n)=>{n.d(t,{Fx:()=>o});var i=n(50880),s=n(89594);class r extends s.pe{static [i.i]="PgJsonbBuilder";constructor(e){super(e,"json","PgJsonb")}build(e){return new a(e,this.config)}}class a extends s.Kl{static [i.i]="PgJsonb";constructor(e,t){super(e,t)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if("string"==typeof e)try{return JSON.parse(e)}catch{}return e}}function o(e){return new r(e)}},7273:(e,t,n)=>{let i,s;n.d(t,{Xs:()=>p,ll:()=>v});var r=n(50880),a=n(86506);class o{static [r.i]="Subquery";constructor(e,t,n,i=!1){this._={brand:"Subquery",sql:e,selectedFields:t,alias:n,isWith:i}}}class l extends null{static [r.i]=null}var u=n(80391);let c={startActiveSpan:(e,t)=>i?(s||(s=i.trace.getTracer("drizzle-orm","0.33.0")),(0,u.i)((n,i)=>i.startActiveSpan(e,e=>{try{return t(e)}catch(t){throw e.setStatus({code:n.SpanStatusCode.ERROR,message:t instanceof Error?t.message:"Unknown error"}),t}finally{e.end()}}),i,s)):t()},h=Symbol.for("drizzle:ViewBaseConfig");var m=n(68081),g=n(22305);class d{static [r.i]=null}class f{static [r.i]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new p([this])}}class p{constructor(e){this.queryChunks=e}static [r.i]="SQL";decoder=b;shouldInlineParams=!1;append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return c.startActiveSpan("drizzle.buildSQL",t=>{let n=this.buildQueryFromSourceParams(this.queryChunks,e);return t?.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(e,t){let n=Object.assign({},t,{inlineParams:t.inlineParams||this.shouldInlineParams,paramStartIndex:t.paramStartIndex||{value:0}}),{escapeName:i,escapeParam:s,prepareTyping:l,inlineParams:u,paramStartIndex:c}=n;return function(e){let t={sql:"",params:[]};for(let n of e)t.sql+=n.sql,t.params.push(...n.params),n.typings?.length&&(t.typings||(t.typings=[]),t.typings.push(...n.typings));return t}(e.map(e=>{if((0,r.is)(e,f))return{sql:e.value.join(""),params:[]};if((0,r.is)(e,y))return{sql:i(e.value),params:[]};if(void 0===e)return{sql:"",params:[]};if(Array.isArray(e)){let t=[new f("(")];for(let[n,i]of e.entries())t.push(i),n<e.length-1&&t.push(new f(", "));return t.push(new f(")")),this.buildQueryFromSourceParams(t,n)}if((0,r.is)(e,p))return this.buildQueryFromSourceParams(e.queryChunks,{...n,inlineParams:u||e.shouldInlineParams});if((0,r.is)(e,g.XI)){let t=e[g.XI.Symbol.Schema],n=e[g.XI.Symbol.Name];return{sql:void 0===t?i(n):i(t)+"."+i(n),params:[]}}if((0,r.is)(e,m.V))return"indexes"===t.invokeSource?{sql:i(e.name),params:[]}:{sql:i(e.table[g.XI.Symbol.Name])+"."+i(e.name),params:[]};if((0,r.is)(e,C)){let t=e[h].schema,n=e[h].name;return{sql:void 0===t?i(n):i(t)+"."+i(n),params:[]}}if((0,r.is)(e,w)){if((0,r.is)(e.value,T))return{sql:s(c.value++,e),params:[e],typings:["none"]};let t=null===e.value?null:e.encoder.mapToDriverValue(e.value);if((0,r.is)(t,p))return this.buildQueryFromSourceParams([t],n);if(u)return{sql:this.mapInlineParam(t,n),params:[]};let i=["none"];return l&&(i=[l(e.encoder)]),{sql:s(c.value++,t),params:[t],typings:i}}return(0,r.is)(e,T)?{sql:s(c.value++,e),params:[e],typings:["none"]}:(0,r.is)(e,p.Aliased)&&void 0!==e.fieldAlias?{sql:i(e.fieldAlias),params:[]}:(0,r.is)(e,o)?e._.isWith?{sql:i(e._.alias),params:[]}:this.buildQueryFromSourceParams([new f("("),e._.sql,new f(") "),new y(e._.alias)],n):(0,a.BU)(e)?e.schema?{sql:i(e.schema)+"."+i(e.enumName),params:[]}:{sql:i(e.enumName),params:[]}:null!=e&&"function"==typeof e.getSQL?e.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([e.getSQL()],n):this.buildQueryFromSourceParams([new f("("),e.getSQL(),new f(")")],n):u?{sql:this.mapInlineParam(e,n),params:[]}:{sql:s(c.value++,e),params:[e],typings:["none"]}}))}mapInlineParam(e,{escapeString:t}){if(null===e)return"null";if("number"==typeof e||"boolean"==typeof e)return e.toString();if("string"==typeof e)return t(e);if("object"==typeof e){let n=e.toString();return"[object Object]"===n?t(JSON.stringify(e)):t(n)}throw Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return void 0===e?this:new p.Aliased(this,e)}mapWith(e){return this.decoder="function"==typeof e?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}}class y{constructor(e){this.value=e}static [r.i]="Name";brand;getSQL(){return new p([this])}}let b={mapFromDriverValue:e=>e},S={mapToDriverValue:e=>e};({...b,...S});class w{constructor(e,t=S){this.value=e,this.encoder=t}static [r.i]="Param";brand;getSQL(){return new p([this])}}function v(e,...t){let n=[];for(let[i,s]of((t.length>0||e.length>0&&""!==e[0])&&n.push(new f(e[0])),t.entries()))n.push(s,new f(e[i+1]));return new p(n)}(e=>{e.empty=function(){return new p([])},e.fromList=function(e){return new p(e)},e.raw=function(e){return new p([new f(e)])},e.join=function(e,t){let n=[];for(let[i,s]of e.entries())i>0&&void 0!==t&&n.push(t),n.push(s);return new p(n)},e.identifier=function(e){return new y(e)},e.placeholder=function(e){return new T(e)},e.param=function(e,t){return new w(e,t)}})(v||(v={})),(e=>{class t{constructor(e,t){this.sql=e,this.fieldAlias=t}static [r.i]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new t(this.sql,this.fieldAlias)}}e.Aliased=t})(p||(p={}));class T{constructor(e){this.name=e}static [r.i]="Placeholder";getSQL(){return new p([this])}}class C{static [r.i]="View";[h];constructor({name:e,schema:t,selectedFields:n,query:i}){this[h]={name:e,originalName:e,schema:t,selectedFields:n,query:i,isExisting:!i,isAlias:!1}}getSQL(){return new p([this])}}m.V.prototype.getSQL=function(){return new p([this])},g.XI.prototype.getSQL=function(){return new p([this])},o.prototype.getSQL=function(){return new p([this])}},7345:(e,t,n)=>{n.d(t,{GL:()=>c,Pe:()=>u});var i=n(7273),s=n(50880),r=n(89594);class a{constructor(e,t){this.unique=e,this.name=t}static [s.i]="PgIndexBuilderOn";on(...e){return new o(e.map(e=>{if((0,s.is)(e,i.Xs))return e;let t=new r.ae(e.name,e.columnType,e.indexConfig);return e.indexConfig=JSON.parse(JSON.stringify(e.defaultConfig)),t}),this.unique,!1,this.name)}onOnly(...e){return new o(e.map(e=>{if((0,s.is)(e,i.Xs))return e;let t=new r.ae(e.name,e.columnType,e.indexConfig);return e.indexConfig=e.defaultConfig,t}),this.unique,!0,this.name)}using(e,...t){return new o(t.map(e=>{if((0,s.is)(e,i.Xs))return e;let t=new r.ae(e.name,e.columnType,e.indexConfig);return e.indexConfig=JSON.parse(JSON.stringify(e.defaultConfig)),t}),this.unique,!0,this.name,e)}}class o{static [s.i]="PgIndexBuilder";config;constructor(e,t,n,i,s="btree"){this.config={name:i,columns:e,unique:t,only:n,method:s}}concurrently(){return this.config.concurrently=!0,this}with(e){return this.config.with=e,this}where(e){return this.config.where=e,this}build(e){return new l(this.config,e)}}class l{static [s.i]="PgIndex";config;constructor(e,t){this.config={...e,table:t}}}function u(e){return new a(!1,e)}function c(e){return new a(!0,e)}},16951:(e,t,n)=>{n.d(t,{vE:()=>h});var i=n(50880),s=n(89594),r=n(7273);class a extends s.pe{static [i.i]="PgDateColumnBaseBuilder";defaultNow(){return this.default((0,r.ll)`now()`)}}class o extends a{static [i.i]="PgTimestampBuilder";constructor(e,t,n){super(e,"date","PgTimestamp"),this.config.withTimezone=t,this.config.precision=n}build(e){return new l(e,this.config)}}class l extends s.Kl{static [i.i]="PgTimestamp";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){let e=void 0===this.precision?"":` (${this.precision})`;return`timestamp${e}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=e=>new Date(this.withTimezone?e:e+"+0000");mapToDriverValue=e=>e.toISOString()}class u extends a{static [i.i]="PgTimestampStringBuilder";constructor(e,t,n){super(e,"string","PgTimestampString"),this.config.withTimezone=t,this.config.precision=n}build(e){return new c(e,this.config)}}class c extends s.Kl{static [i.i]="PgTimestampString";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){let e=void 0===this.precision?"":`(${this.precision})`;return`timestamp${e}${this.withTimezone?" with time zone":""}`}}function h(e,t={}){return"string"===t.mode?new u(e,t.withTimezone??!1,t.precision):new o(e,t.withTimezone??!1,t.precision)}},17780:(e,t,n)=>{n.d(t,{K1:()=>u});var i=n(22305),s=n(50880);class r{constructor(e,t,n){this.sourceTable=e,this.referencedTable=t,this.relationName=n,this.referencedTableName=t[i.XI.Symbol.Name]}static [s.i]="Relation";referencedTableName;fieldName}class a{constructor(e,t){this.table=e,this.config=t}static [s.i]="Relations"}class o extends r{constructor(e,t,n,i){super(e,t,n?.relationName),this.config=n,this.isNullable=i}static [s.i]="One";withFieldName(e){let t=new o(this.sourceTable,this.referencedTable,this.config,this.isNullable);return t.fieldName=e,t}}class l extends r{constructor(e,t,n){super(e,t,n?.relationName),this.config=n}static [s.i]="Many";withFieldName(e){let t=new l(this.sourceTable,this.referencedTable,this.config);return t.fieldName=e,t}}function u(e,t){return new a(e,e=>Object.fromEntries(Object.entries(t(e)).map(([e,t])=>[e,t.withFieldName(e)])))}},22305:(e,t,n)=>{n.d(t,{XI:()=>g});var i=n(50880);let s=Symbol.for("drizzle:Name"),r=Symbol.for("drizzle:Schema"),a=Symbol.for("drizzle:Columns"),o=Symbol.for("drizzle:ExtraConfigColumns"),l=Symbol.for("drizzle:OriginalName"),u=Symbol.for("drizzle:BaseName"),c=Symbol.for("drizzle:IsAlias"),h=Symbol.for("drizzle:ExtraConfigBuilder"),m=Symbol.for("drizzle:IsDrizzleTable");class g{static [i.i]="Table";static Symbol={Name:s,Schema:r,OriginalName:l,Columns:a,ExtraConfigColumns:o,BaseName:u,IsAlias:c,ExtraConfigBuilder:h};[s];[l];[r];[a];[o];[u];[c]=!1;[m]=!0;[h]=void 0;constructor(e,t,n){this[s]=this[l]=e,this[r]=t,this[u]=n}}},25189:(e,t,n)=>{n.d(t,{nd:()=>l});var i=n(50880),s=n(89594);class r extends s.pe{static [i.i]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(e){if(e){let{name:t,...n}=e;this.config.generatedIdentity={type:"always",sequenceName:t,sequenceOptions:n}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){let{name:t,...n}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:t,sequenceOptions:n}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}class a extends r{static [i.i]="PgIntegerBuilder";constructor(e){super(e,"number","PgInteger")}build(e){return new o(e,this.config)}}class o extends s.Kl{static [i.i]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(e){return"string"==typeof e?Number.parseInt(e):e}}function l(e){return new a(e)}},25910:(e,t,n)=>{n.d(t,{ie:()=>r});var i=n(50880),s=n(74493);function r(...e){return e[0].columns?new a(e[0].columns,e[0].name):new a(e)}class a{static [i.i]="PgPrimaryKeyBuilder";columns;name;constructor(e,t){this.columns=e,this.name=t}build(e){return new o(e,this.columns,this.name)}}class o{constructor(e,t,n){this.table=e,this.columns=t,this.name=n}static [i.i]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[s.mu.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}}},50880:(e,t,n)=>{n.d(t,{i:()=>i,is:()=>s});let i=Symbol.for("drizzle:entityKind");function s(e,t){if(!e||"object"!=typeof e)return!1;if(e instanceof t)return!0;if(!Object.prototype.hasOwnProperty.call(t,i))throw Error(`Class "${t.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let n=e.constructor;if(n)for(;n;){if(i in n&&n[i]===t[i])return!0;n=Object.getPrototypeOf(n)}return!1}Symbol.for("drizzle:hasOwnEntityKind")},51312:(e,t,n)=>{n.d(t,{aJ:()=>W});var i=n(22305),s=n(50880),r=n(84655),a=n(68081);let o=Symbol.for("drizzle:MySqlInlineForeignKeys");class l extends i.XI{static [s.i]="MySqlTable";static Symbol=Object.assign({},i.XI.Symbol,{InlineForeignKeys:o});[i.XI.Symbol.Columns];[o]=[];[i.XI.Symbol.ExtraConfigBuilder]=void 0}class u{static [s.i]="MySqlForeignKeyBuilder";reference;_onUpdate;_onDelete;constructor(e,t){this.reference=()=>{let{name:t,columns:n,foreignColumns:i}=e();return{name:t,columns:n,foreignTable:i[0].table,foreignColumns:i}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=e,this}onDelete(e){return this._onDelete=e,this}build(e){return new c(e,this)}}class c{constructor(e,t){this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}static [s.i]="MySqlForeignKey";reference;onUpdate;onDelete;getName(){let{name:e,columns:t,foreignColumns:n}=this.reference(),i=t.map(e=>e.name),s=n.map(e=>e.name),r=[this.table[l.Symbol.Name],...i,n[0].table[l.Symbol.Name],...s];return e??`${r.join("_")}_fk`}}function h(e,t){return`${e[l.Symbol.Name]}_${t.join("_")}_unique`}class m{constructor(e,t){this.name=t,this.columns=e}static [s.i]=null;columns;build(e){return new d(e,this.columns,this.name)}}class g{static [s.i]=null;name;constructor(e){this.name=e}on(...e){return new m(e,this.name)}}class d{constructor(e,t,n){this.table=e,this.columns=t,this.name=n??h(this.table,this.columns.map(e=>e.name))}static [s.i]=null;columns;name;nullsNotDistinct=!1;getName(){return this.name}}class f extends r.Q{static [s.i]="MySqlColumnBuilder";foreignKeyConfigs=[];references(e,t={}){return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e){return this.config.isUnique=!0,this.config.uniqueName=e,this}generatedAlwaysAs(e,t){return this.config.generated={as:e,type:"always",mode:t?.mode??"virtual"},this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(({ref:n,actions:i})=>((n,i)=>{let s=new u(()=>({columns:[e],foreignColumns:[n()]}));return i.onUpdate&&s.onUpdate(i.onUpdate),i.onDelete&&s.onDelete(i.onDelete),s.build(t)})(n,i))}}class p extends a.V{constructor(e,t){t.uniqueName||(t.uniqueName=h(e,[t.name])),super(e,t),this.table=e}static [s.i]="MySqlColumn"}class y extends f{static [s.i]="MySqlColumnBuilderWithAutoIncrement";constructor(e,t,n){super(e,t,n),this.config.autoIncrement=!1}autoincrement(){return this.config.autoIncrement=!0,this.config.hasDefault=!0,this}}class b extends null{static [s.i]=null;autoIncrement=this.config.autoIncrement}class S extends f{static [s.i]="MySqlVarCharBuilder";constructor(e,t){super(e,"string","MySqlVarChar"),this.config.length=t.length,this.config.enum=t.enum}build(e){return new w(e,this.config)}}class w extends p{static [s.i]="MySqlVarChar";length=this.config.length;enumValues=this.config.enum;getSQLType(){return void 0===this.length?"varchar":`varchar(${this.length})`}}class v extends f{static [s.i]="MySqlVarBinaryBuilder";constructor(e,t){super(e,"string","MySqlVarBinary"),this.config.length=t?.length}build(e){return new T(e,this.config)}}class T extends p{static [s.i]="MySqlVarBinary";length=this.config.length;getSQLType(){return void 0===this.length?"varbinary":`varbinary(${this.length})`}}class C extends f{static [s.i]="MySqlCharBuilder";constructor(e,t){super(e,"string","MySqlChar"),this.config.length=t.length,this.config.enum=t.enum}build(e){return new x(e,this.config)}}class x extends p{static [s.i]="MySqlChar";length=this.config.length;enumValues=this.config.enum;getSQLType(){return void 0===this.length?"char":`char(${this.length})`}}var q=n(7273),z=n(89594);class N extends z.pe{static [s.i]="PgUUIDBuilder";constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default((0,q.ll)`gen_random_uuid()`)}build(e){return new P(e,this.config)}}class P extends z.Kl{static [s.i]="PgUUID";getSQLType(){return"uuid"}}class D extends z.pe{static [s.i]="PgCharBuilder";constructor(e,t){super(e,"string","PgChar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new I(e,this.config)}}class I extends z.Kl{static [s.i]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"char":`char(${this.length})`}}var Q=n(69792);let V=Symbol.for("drizzle:SQLiteInlineForeignKeys");class F extends i.XI{static [s.i]="SQLiteTable";static Symbol=Object.assign({},i.XI.Symbol,{InlineForeignKeys:V});[i.XI.Symbol.Columns];[V]=[];[i.XI.Symbol.ExtraConfigBuilder]=void 0}class U{static [s.i]="SQLiteForeignKeyBuilder";reference;_onUpdate;_onDelete;constructor(e,t){this.reference=()=>{let{name:t,columns:n,foreignColumns:i}=e();return{name:t,columns:n,foreignTable:i[0].table,foreignColumns:i}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=e,this}onDelete(e){return this._onDelete=e,this}build(e){return new L(e,this)}}class L{constructor(e,t){this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}static [s.i]="SQLiteForeignKey";reference;onUpdate;onDelete;getName(){let{name:e,columns:t,foreignColumns:n}=this.reference(),i=t.map(e=>e.name),s=n.map(e=>e.name),r=[this.table[F.Symbol.Name],...i,n[0].table[F.Symbol.Name],...s];return e??`${r.join("_")}_fk`}}function _(e,t){return`${e[F.Symbol.Name]}_${t.join("_")}_unique`}class B{constructor(e,t){this.name=t,this.columns=e}static [s.i]=null;columns;build(e){return new K(e,this.columns,this.name)}}class O{static [s.i]=null;name;constructor(e){this.name=e}on(...e){return new B(e,this.name)}}class K{constructor(e,t,n){this.table=e,this.columns=t,this.name=n??_(this.table,this.columns.map(e=>e.name))}static [s.i]=null;columns;name;getName(){return this.name}}class j extends r.Q{static [s.i]="SQLiteColumnBuilder";foreignKeyConfigs=[];references(e,t={}){return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e){return this.config.isUnique=!0,this.config.uniqueName=e,this}generatedAlwaysAs(e,t){return this.config.generated={as:e,type:"always",mode:t?.mode??"virtual"},this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(({ref:n,actions:i})=>((n,i)=>{let s=new U(()=>({columns:[e],foreignColumns:[n()]}));return i.onUpdate&&s.onUpdate(i.onUpdate),i.onDelete&&s.onDelete(i.onDelete),s.build(t)})(n,i))}}class $ extends a.V{constructor(e,t){t.uniqueName||(t.uniqueName=_(e,[t.name])),super(e,t),this.table=e}static [s.i]="SQLiteColumn"}class A extends j{static [s.i]="SQLiteTextBuilder";constructor(e,t){super(e,"string","SQLiteText"),this.config.enumValues=t.enum,this.config.length=t.length}build(e){return new E(e,this.config)}}class E extends ${static [s.i]="SQLiteText";enumValues=this.config.enumValues;length=this.config.length;constructor(e,t){super(e,t)}getSQLType(){return`text${this.config.length?`(${this.config.length})`:""}`}}class X extends j{static [s.i]="SQLiteTextJsonBuilder";constructor(e){super(e,"json","SQLiteTextJson")}build(e){return new k(e,this.config)}}class k extends ${static [s.i]="SQLiteTextJson";getSQLType(){return"text"}mapFromDriverValue(e){return JSON.parse(e)}mapToDriverValue(e){return JSON.stringify(e)}}var J=n(23338);let M=J.z.union([J.z.string(),J.z.number(),J.z.boolean(),J.z.null()]),R=J.z.lazy(()=>J.z.union([M,J.z.array(R),J.z.record(R)]));function W(e,t){let n=Object.entries(e[i.XI.Symbol.Columns]),r=Object.fromEntries(n.map(([e,t])=>[e,function e(t){let n;if("enumValues"in t&&Array.isArray(t.enumValues)&&t.enumValues.length>0&&(n=t.enumValues.length?J.z.enum(t.enumValues):J.z.string()),!n){if((0,s.is)(t,P))n=J.z.string().uuid();else if("custom"===t.dataType)n=J.z.any();else if("json"===t.dataType)n=R;else if("array"===t.dataType)n=J.z.array(e(t.baseColumn));else if("number"===t.dataType)n=J.z.number();else if("bigint"===t.dataType)n=J.z.bigint();else if("boolean"===t.dataType)n=J.z.boolean();else if("date"===t.dataType)n=J.z.date();else if("string"===t.dataType){let e=J.z.string();((0,s.is)(t,I)||(0,s.is)(t,Q.tO)||(0,s.is)(t,w)||(0,s.is)(t,T)||(0,s.is)(t,x)||(0,s.is)(t,E))&&"number"==typeof t.length&&(e=e.max(t.length)),n=e}}return n||(n=J.z.any()),n}(t)]));for(let[e,i]of(t&&(r=Object.assign(r,Object.fromEntries(Object.entries(t).map(([e,t])=>[e,"function"==typeof t?t(r):t])))),n))i.notNull||(r[e]=r[e].nullable());return J.z.object(r)}},58276:(e,t,n)=>{n.d(t,{_z:()=>o});var i=n(50880),s=n(89594);class r extends s.pe{static [i.i]="PgCustomColumnBuilder";constructor(e,t,n){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=t,this.config.customTypeParams=n}build(e){return new a(e,this.config)}}class a extends s.Kl{static [i.i]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(e,t){super(e,t),this.sqlName=t.customTypeParams.dataType(t.fieldConfig),this.mapTo=t.customTypeParams.toDriver,this.mapFrom=t.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return"function"==typeof this.mapFrom?this.mapFrom(e):e}mapToDriverValue(e){return"function"==typeof this.mapTo?this.mapTo(e):e}}function o(e){return(t,n)=>new r(t,n,e)}},65504:(e,t,n)=>{n.d(t,{_:()=>i});function i(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}},68081:(e,t,n)=>{n.d(t,{V:()=>s});var i=n(50880);class s{constructor(e,t){this.table=e,this.config=t,this.name=t.name,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.onUpdateFn=t.onUpdateFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType,this.generated=t.generated,this.generatedIdentity=t.generatedIdentity}static [i.i]="Column";name;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return void 0!==this.config.generated&&"byDefault"!==this.config.generated.type}}},69792:(e,t,n)=>{n.d(t,{tO:()=>a,yf:()=>o});var i=n(50880),s=n(89594);class r extends s.pe{static [i.i]="PgVarcharBuilder";constructor(e,t){super(e,"string","PgVarchar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new a(e,this.config)}}class a extends s.Kl{static [i.i]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"varchar":`varchar(${this.length})`}}function o(e,t={}){return new r(e,t)}},72443:(e,t,n)=>{n.d(t,{x:()=>o});var i=n(50880),s=n(89594);class r extends s.pe{static [i.i]="PgRealBuilder";constructor(e,t){super(e,"number","PgReal"),this.config.length=t}build(e){return new a(e,this.config)}}class a extends s.Kl{static [i.i]="PgReal";constructor(e,t){super(e,t)}getSQLType(){return"real"}mapFromDriverValue=e=>"string"==typeof e?Number.parseFloat(e):e}function o(e){return new r(e)}},74493:(e,t,n)=>{n.d(t,{cJ:()=>o,mu:()=>a});var i=n(50880),s=n(22305);let r=Symbol.for("drizzle:PgInlineForeignKeys");class a extends s.XI{static [i.i]="PgTable";static Symbol=Object.assign({},s.XI.Symbol,{InlineForeignKeys:r});[r]=[];[s.XI.Symbol.ExtraConfigBuilder]=void 0}let o=(e,t,n)=>(function(e,t,n,i,o=e){let l=new a(e,i,o),u=Object.fromEntries(Object.entries(t).map(([e,t])=>{let n=t.build(l);return l[r].push(...t.buildForeignKeys(n,l)),[e,n]})),c=Object.fromEntries(Object.entries(t).map(([e,t])=>[e,t.buildExtraConfigColumn(l)])),h=Object.assign(l,u);return h[s.XI.Symbol.Columns]=u,h[s.XI.Symbol.ExtraConfigColumns]=c,n&&(h[a.Symbol.ExtraConfigBuilder]=n),h})(e,t,n,void 0)},80391:(e,t,n)=>{n.d(t,{i:()=>i});function i(e,...t){return e(...t)}},82345:(e,t,n)=>{n.d(t,{zM:()=>o});var i=n(50880),s=n(89594);class r extends s.pe{static [i.i]="PgBooleanBuilder";constructor(e){super(e,"boolean","PgBoolean")}build(e){return new a(e,this.config)}}class a extends s.Kl{static [i.i]="PgBoolean";getSQLType(){return"boolean"}}function o(e){return new r(e)}},84655:(e,t,n)=>{n.d(t,{Q:()=>s});var i=n(50880);class s{static [i.i]="ColumnBuilder";config;constructor(e,t,n){this.config={name:e,notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}}},86506:(e,t,n)=>{n.d(t,{BU:()=>a,rL:()=>u});var i=n(50880),s=n(89594);let r=Symbol.for("drizzle:isPgEnum");function a(e){return!!e&&"function"==typeof e&&r in e&&!0===e[r]}class o extends s.pe{static [i.i]="PgEnumColumnBuilder";constructor(e,t){super(e,"string","PgEnumColumn"),this.config.enum=t}build(e){return new l(e,this.config)}}class l extends s.Kl{static [i.i]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(e,t){super(e,t),this.enum=t.enum}getSQLType(){return this.enum.enumName}}function u(e,t){return function(e,t,n){let i=Object.assign(e=>new o(e,i),{enumName:e,enumValues:t,schema:n,[r]:!0});return i}(e,t,void 0)}},89594:(e,t,n)=>{n.d(t,{ae:()=>b,Kl:()=>p,pe:()=>f});var i=n(84655),s=n(68081),r=n(50880),a=n(74493);class o{static [r.i]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,t){this.reference=()=>{let{name:t,columns:n,foreignColumns:i}=e();return{name:t,columns:n,foreignTable:i[0].table,foreignColumns:i}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=void 0===e?"no action":e,this}onDelete(e){return this._onDelete=void 0===e?"no action":e,this}build(e){return new l(e,this)}}class l{constructor(e,t){this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}static [r.i]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:e,columns:t,foreignColumns:n}=this.reference(),i=t.map(e=>e.name),s=n.map(e=>e.name),r=[this.table[a.mu.Symbol.Name],...i,n[0].table[a.mu.Symbol.Name],...s];return e??`${r.join("_")}_fk`}}var u=n(80391);function c(e,t){return`${e[a.mu.Symbol.Name]}_${t.join("_")}_unique`}class h{constructor(e,t){this.name=t,this.columns=e}static [r.i]=null;columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new g(e,this.columns,this.nullsNotDistinctConfig,this.name)}}class m{static [r.i]=null;name;constructor(e){this.name=e}on(...e){return new h(e,this.name)}}class g{constructor(e,t,n,i){this.table=e,this.columns=t,this.name=i??c(this.table,this.columns.map(e=>e.name)),this.nullsNotDistinct=n}static [r.i]=null;columns;name;nullsNotDistinct=!1;getName(){return this.name}}function d(e,t,n){for(let i=t;i<e.length;i++){let s=e[i];if("\\"===s){i++;continue}if('"'===s)return[e.slice(t,i).replace(/\\/g,""),i+1];if(!n&&(","===s||"}"===s))return[e.slice(t,i).replace(/\\/g,""),i]}return[e.slice(t).replace(/\\/g,""),e.length]}class f extends i.Q{foreignKeyConfigs=[];static [r.i]="PgColumnBuilder";array(e){return new S(this.config.name,this,e)}references(e,t={}){return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e,t){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=t?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(({ref:n,actions:i})=>(0,u.i)((n,i)=>{let s=new o(()=>({columns:[e],foreignColumns:[n()]}));return i.onUpdate&&s.onUpdate(i.onUpdate),i.onDelete&&s.onDelete(i.onDelete),s.build(t)},n,i))}buildExtraConfigColumn(e){return new y(e,this.config)}}class p extends s.V{constructor(e,t){t.uniqueName||(t.uniqueName=c(e,[t.name])),super(e,t),this.table=e}static [r.i]="PgColumn"}class y extends p{static [r.i]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}}class b{static [r.i]="IndexedColumn";constructor(e,t,n){this.name=e,this.type=t,this.indexConfig=n}name;type;indexConfig}class S extends f{static [r.i]="PgArrayBuilder";constructor(e,t,n){super(e,"array","PgArray"),this.config.baseBuilder=t,this.config.size=n}build(e){let t=this.config.baseBuilder.build(e);return new w(e,this.config,t)}}class w extends p{constructor(e,t,n,i){super(e,t),this.baseColumn=n,this.range=i,this.size=t.size}size;static [r.i]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${"number"==typeof this.size?this.size:""}]`}mapFromDriverValue(e){return"string"==typeof e&&(e=function(e){let[t]=function e(t,n=0){let i=[],s=n,r=!1;for(;s<t.length;){let a=t[s];if(","===a){(r||s===n)&&i.push(""),r=!0,s++;continue}if(r=!1,"\\"===a){s+=2;continue}if('"'===a){let[e,n]=d(t,s+1,!0);i.push(e),s=n;continue}if("}"===a)return[i,s+1];if("{"===a){let[n,r]=e(t,s+1);i.push(n),s=r;continue}let[o,l]=d(t,s,!1);i.push(o),s=l}return[i,s]}(e,1);return t}(e)),e.map(e=>this.baseColumn.mapFromDriverValue(e))}mapToDriverValue(e,t=!1){let n=e.map(e=>null===e?null:(0,r.is)(this.baseColumn,w)?this.baseColumn.mapToDriverValue(e,!0):this.baseColumn.mapToDriverValue(e));return t?n:function e(t){return`{${t.map(t=>Array.isArray(t)?e(t):"string"==typeof t?`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${t}`).join(",")}}`}(n)}}},96364:(e,t,n)=>{n.d(t,{Qq:()=>o});var i=n(50880),s=n(89594);class r extends s.pe{static [i.i]="PgTextBuilder";constructor(e,t){super(e,"string","PgText"),this.config.enumValues=t.enum}build(e){return new a(e,this.config)}}class a extends s.Kl{static [i.i]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}}function o(e,t={}){return new r(e,t)}},99359:(e,t,n)=>{n.d(t,{vX:()=>o});var i=n(50880),s=n(89594);class r extends s.pe{static [i.i]="PgSerialBuilder";constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new a(e,this.config)}}class a extends s.Kl{static [i.i]="PgSerial";getSQLType(){return"serial"}}function o(e){return new r(e)}}}]);