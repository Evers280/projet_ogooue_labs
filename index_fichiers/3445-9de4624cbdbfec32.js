"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3445],{8684:(e,t,r)=>{r.d(t,{TemplateBlockButton:()=>u});var a=r(27545);r(39149);var l=r(75838),n=r(9300),i=r(6145);let s=(0,i.createServerReference)("601d17850b61aa4c5c8310956a8d123d7c2b3e8483",i.callServer,void 0,i.findSourceMapURL,"openSharedTemplateInChatAction");var o=r(54516),c=r(26241),d=r(88170);function u(e){let{template:t,buttonProps:r,formProps:i}=e,{expectUser:s}=(0,l.J)(),{setShowSignInDialog:o}=(0,n.AO)();return s?(0,a.jsx)(m,{formProps:i,buttonProps:r,template:t}):(0,a.jsx)("form",{onSubmit:e=>{e.preventDefault(),o({prompt:!1})},...i,children:(0,a.jsx)(p,{...r})})}function m(e){let{template:t,buttonProps:r,formProps:l}=e,n=t.templateCanonId;return(0,a.jsx)("form",{action:async()=>{await s(n)},...l,children:(0,a.jsx)(p,{...r})})}function p(e){let{className:t,hideTextWhenPending:r=!1,...l}=e,{pending:n}=(0,d.useFormStatus)();return(0,a.jsx)(c.Q,{type:"submit",className:t,pending:n,size:"sm",...l,children:r&&n?null:(0,a.jsxs)("div",{className:"flex w-full items-center justify-center gap-1",children:["Open in ",(0,a.jsx)(o.g,{className:"!w-5"})]})})}},18387:(e,t,r)=>{r.d(t,{L:()=>a});let a=[{text:"Apps",value:"apps"},{text:"Games",value:"games"},{text:"Sites",value:"sites"},{text:"Components",value:"components"},{text:"Blocks",value:"blocks"}]},31101:(e,t,r)=>{r.d(t,{ForkBlockButton:()=>b});var a=r(27545),l=r(39149),n=r(62787),i=r(97797),s=r(71426),o=r(75010),c=r(70244),d=r(36990),u=r(2006),m=r(3906),p=r(10289),f=r(79603),g=r(45629),h=r(24595),x=r(9300),v=r(75838),j=r(85422);function b(e){let{blockId:t,forkCount:r,className:b,page:y,isAuthor:z,isMenuItem:C=!1}=e,{expectUser:k}=(0,v.J)(),{setShowSignInDialog:L}=(0,x.AO)(),N=(0,f.useRouter)(),[w,D]=(0,l.useTransition)(),{isStreaming:R}=(0,g.Pk)(),I=(0,h.k)("forkBlockButton"),{user:M}=(0,v.J)(),S=(0,l.useCallback)(e=>{if(e.preventDefault(),!z&&(null==M?void 0:M.isAdminMode)&&!window.confirm("[V0 ADMIN] Are you sure you want to fork this block?"))return;let r=new URLSearchParams;r.set("forkBlockId",t);let a="http://localhost:3000/chat";a="https://v0.dev/chat";let l="".concat(a,"?").concat(r.toString());if(!k)return L({prompt:!1,forkBlockId:t});(0,n.u)("ClickForkBlock");try{D(async()=>{if("chat"===y){let e=await (0,o.O)(t);if(!e||"string"!=typeof e){c.oR.error(I("errorToast"));return}N.push("/chat/".concat(e))}if(c.oR.success(I("successToast")),"block"===y){var e;null===(e=window.open(l,"_blank"))||void 0===e||e.focus()}})}catch(e){(0,f.unstable_rethrow)(e),console.log(e),(0,d.z)(e)||c.oR.error(I("errorToast"))}},[z,null==M?void 0:M.isAdminMode,t,k,L,y,I,N]),U=null;U="block"===y?"secondary":z?"ghost":"secondary";let V="block"===y||!z,T=w?(0,a.jsx)(p.y,{className:"!size-4 text-gray-500",size:16}):(0,a.jsx)(s.Z,{className:"!size-4"});return C?(0,a.jsxs)(j.DropdownMenuItem,{className:b,disabled:w||R,onClick:S,children:[T,(0,a.jsx)("span",{children:I("fork")})]}):(0,a.jsxs)(i.$,{className:(0,m.cn)("group rounded-md px-2 has-[>svg]:px-2",r&&"md:has-[>svg]:pr-2","ghost"===U?"size-7":"h-7",b),disabled:w||R,onClick:S,tooltip:V?void 0:I("fork"),size:"sm",variant:U,children:[w?(0,a.jsx)(p.y,{className:"!size-3.5 text-gray-500 md:!size-4",size:16}):(0,a.jsx)(s.Z,{className:"!size-3.5 md:!size-4"}),V?I("fork"):null,r?(0,a.jsx)(u.E,{className:"bg-gray-150 hidden min-w-5 border-0 text-gray-500 group-hover:bg-gray-300 group-hover:text-gray-600 md:flex",size:"sm",variant:"secondary",children:(0,a.jsx)("span",{className:"translate-y-[0.5px]",children:r})}):null]})}},32092:(e,t,r)=>{r.d(t,{FeedbackDialog:()=>b,f:()=>j});var a=r(27545),l=r(41664),n=r(3906),i=r(45043),s=r(13773),o=r(76951),c=r(88707),d=r(44492),u=r(39149),m=r(70244),p=r(6145);let f=(0,p.createServerReference)("40303f3bf9b09e9869ea66fdf0cdaa223d59e9792b",p.callServer,void 0,p.findSourceMapURL,"sendGeneralFeedback");var g=r(75838),h=r(97797),x=r(88704),v=r(24595);function j(){let{data:e,mutate:t}=(0,l.Ay)("feedback-dialog-show",null,{fallbackData:!1});return{showFeedbackDialog:e,setFeedbackDialog:t}}function b(){let e=(0,v.k)("feedbackDialog"),{showFeedbackDialog:t,setFeedbackDialog:r}=j(),[l,n]=(0,u.useState)(""),[i,s]=(0,u.useState)(void 0),[o,c]=(0,u.useState)(),d=(e,t)=>{t&&(n(""),s(void 0),c(void 0)),r(e)};return(0,a.jsxs)(x.Modal,{onOpenChange:d,open:t,children:[(0,a.jsxs)(x.ModalHeader,{children:[(0,a.jsx)(x.ModalTitle,{children:e("title")}),(0,a.jsx)(x.ModalDescription,{children:e("description")})]}),(0,a.jsx)(x.ModalContent,{children:(0,a.jsx)(z,{feedback:l,selectedOption:i,setFeedback:n,setFeedbackDialog:d,setSelectedOption:s,setValidationError:c,validationError:o})})]})}function y(e){let{children:t,selectedOption:r,option:l,handleOptionClick:i}=e;return(0,a.jsx)(h.$,{className:(0,n.cn)("transition-all duration-300",r===l&&"border-gray-900 hover:border-gray-900 focus:border-gray-900 focus-visible:border-gray-900"),onClick:()=>i(l),size:"sm",type:"button",variant:"secondary",children:t})}function z(e){let{feedback:t,setFeedback:r,selectedOption:l,setSelectedOption:u,validationError:p,setValidationError:j,setFeedbackDialog:b}=e,z=(0,v.k)("feedbackDialog"),{user:C}=(0,g.J)(),k=e=>{e&&u(e),j(void 0)},{formRef:L,onKeyDown:N}=(0,d.G)();return(0,a.jsxs)("form",{className:"div flex flex-col gap-4",onSubmit:e=>{if(e.preventDefault(),""===t.trim()){j(z("error.enterFeedback"));return}if(!l){j(z("error.selectEmoji"));return}f({feedback:t,url:location.href,sentiment:l,user:C}),b(!1,!0),(0,m.oR)(z("successToast"))},ref:L,children:[(0,a.jsx)(c.T,{className:"max-h-[60vh] shadow-none",name:"feedback",onChange:e=>r(e.target.value),onKeyDown:N,placeholder:z("yourFeedback"),required:!0,rows:4,value:t}),(0,a.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,a.jsxs)("div",{className:"flex w-full items-center justify-start gap-2",children:[(0,a.jsx)(y,{handleOptionClick:k,option:"bad",selectedOption:l,children:(0,a.jsx)(i.A,{className:(0,n.cn)("size-4",{"dark:fill-red-400/80 fill-red-200":"bad"===l})})}),(0,a.jsx)(y,{handleOptionClick:k,option:"neutral",selectedOption:l,children:(0,a.jsx)(s.A,{className:(0,n.cn)("size-4",{"dark:fill-amber-500/70 fill-yellow-200":"neutral"===l})})}),(0,a.jsx)(y,{handleOptionClick:k,option:"good",selectedOption:l,children:(0,a.jsx)(o.A,{className:(0,n.cn)("size-4",{"dark:fill-green-500/60 fill-green-200":"good"===l})})}),(0,a.jsx)("div",{children:p&&(0,a.jsx)("div",{className:"text-sm text-red-700",role:"alert",children:p})})]}),(0,a.jsxs)(x.ModalFooter,{className:"p-0 md:p-0",children:[(0,a.jsx)(x.ModalClose,{asChild:!0,children:(0,a.jsx)(h.$,{size:"sm",type:"button",variant:"secondary",children:z("cancel")})}),(0,a.jsx)(h.$,{size:"sm",type:"submit",children:z("submit")})]})]})]})}},32638:(e,t,r)=>{r.r(t),r.d(t,{TemplateImage:()=>u});var a=r(27545),l=r(56479),n=r(63122),i=r(41664),s=r(75728),o=r(73090),c=r(3906);function d(e){return fetch(e).then(e=>e.json())}function u(e){let{index:t,templateCanonId:r,src:u,alt:m,showScreenshotMessage:p=!1,className:f,...g}=e,{data:h}=(0,i.Ay)(u?null:"/chat/api/template-image/".concat(r),d,{refreshInterval:2e3});return u||(null==h?void 0:h.imageUrl)?(0,a.jsx)(n.default,{className:(0,c.cn)("object-cover object-top",f),fill:!0,loading:t&&t>4?"lazy":"eager",decoding:t&&t>4?"async":"sync",alt:m||"",src:u||(null==h?void 0:h.imageUrl),...g}):p?(0,a.jsx)("div",{className:"flex size-full flex-col items-center justify-center gap-3",children:(0,a.jsx)(s.Sv,{children:(0,a.jsxs)(s.HY,{children:[(0,a.jsx)(s.Ft,{children:(0,a.jsx)(o._,{})}),(0,a.jsxs)(s.Ou,{className:"font-medium",children:["We're grabbing a screenshot of your template, or",(0,a.jsx)("br",{}),"you can upload your own image."]})]})})}):(0,a.jsx)(l.E,{className:"h-full w-full"})}},35294:(e,t,r)=>{r.d(t,{_d:()=>f,qn:()=>p,vn:()=>g});var a=r(27545),l=r(39149),n=r(88704),i=r(97797),s=r(41664),o=r(56670),c=r.n(o),d=r(32638),u=r(20862),m=r(95200);function p(){let{data:e,mutate:t}=(0,s.Ay)("templateCreatedDialogOpen",null,{fallbackData:!1});return{templateCreatedDialogOpen:e,setTemplateCreatedDialogOpen:t}}function f(){let{data:e,mutate:t}=(0,s.Ay)("templateCreatedInfo",null,{fallbackData:null});return{templateCreatedInfo:e,setTemplateCreatedInfo:t}}function g(e){var t,r,s,o;let{activeBlock:g}=e,{setTemplateEditDialogOpen:h}=(0,m.I)(),{templateCreatedInfo:x}=f(),{templateCreatedDialogOpen:v,setTemplateCreatedDialogOpen:j}=p(),[b]=l.useTransition(),y=l.useMemo(()=>{var e;let t=(0,u.D)(null!==(e=g.templateCanonId)&&void 0!==e?e:"",g.meta.project||g.meta.title);return"".concat(window.location.origin,"/chat/community/").concat(t)},[g]),z=x?(0,a.jsxs)(c(),{href:y,target:"_blank",className:"group relative flex flex-col items-stretch overflow-hidden rounded-md border text-sm",children:[(0,a.jsxs)("div",{className:"bg-muted pointer-events-none relative aspect-video overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gradient-to-t from-[hsla(0,0%,100%,0.3)] to-[hsla(0,0%,40%,0.3)] opacity-0 transition-opacity group-hover:opacity-100",children:(0,a.jsx)(i.$,{size:"sm",children:"View"})}),(0,a.jsx)(d.TemplateImage,{showScreenshotMessage:!0,src:x.imageUrl,templateCanonId:g.templateCanonId})]}),(0,a.jsxs)("div",{className:"border-alpha-200 flex flex-col gap-1 border-t px-4 py-3",children:[(0,a.jsx)("p",{className:"font-medium",children:x.title}),(0,a.jsx)("p",{className:"line-clamp-1 truncate text-gray-500",children:x.description})]})]}):null;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.Modal,{open:v,onOpenChange:j,onInteractOutside:e=>{b&&e.preventDefault()},className:"flex flex-col md:max-h-[90vh]",children:[(0,a.jsxs)(n.ModalHeader,{children:[(0,a.jsx)(n.ModalTitle,{children:(0,a.jsx)("span",{children:"Published to Community"})}),(0,a.jsx)(n.ModalDescription,{children:(0,a.jsx)("span",{children:"Your submission is in review."})})]}),(0,a.jsx)(n.ModalContent,{className:"flex flex-col gap-4",children:z}),(0,a.jsxs)("div",{className:"bg-muted border-alpha-400 sticky bottom-0 flex w-full items-center justify-end gap-2 border-t p-4",children:[(0,a.jsx)(i.$,{className:"mr-auto",onClick:()=>{j(!1),setTimeout(()=>void h(!0),100)},disabled:b,variant:"ghost",size:"sm",children:(0,a.jsx)("span",{children:"Edit"})}),(0,a.jsx)(i.$,{asChild:!0,disabled:b,variant:"secondary",size:"sm",children:(0,a.jsx)(c(),{href:y,target:"_blank",children:"View"})}),(0,a.jsx)(n.ModalClose,{asChild:!0,children:(0,a.jsx)(i.$,{size:"sm",disabled:b,children:"Done"})})]})]}),(0,a.jsx)(m.TemplateEditDialog,{templateCanonId:g.templateCanonId,blockId:g.id,title:null!==(r=null==x?void 0:x.title)&&void 0!==r?r:"",description:null!==(s=null==x?void 0:x.description)&&void 0!==s?s:void 0,category:null!==(o=null==x?void 0:x.category)&&void 0!==o?o:null,imageUrl:null,shouldReturnToCreatedDialog:!0,activeBlock:g,envVarKeys:(null==x?void 0:x.envVarKeys)||(null===(t=g.env)||void 0===t?void 0:t.map(e=>e.key))||[]})]})}},40183:(e,t,r)=>{r.d(t,{l:()=>a});let a=(0,r(69435).G)('<path fill-rule="evenodd" clip-rule="evenodd" d="M2.5 2.38401C2.64568 2.28957 2.84672 2.17097 3.09632 2.0516C3.67556 1.77457 4.50202 1.5 5.5 1.5C6.36835 1.5 7.01666 1.91731 7.76416 2.47582C7.81395 2.51302 7.86487 2.55137 7.91678 2.59046C8.2325 2.82825 8.58515 3.09385 8.94862 3.30046C9.38732 3.54983 9.90016 3.75 10.5 3.75C11.4771 3.75 12.5081 3.46807 13.2589 3.20897C13.3421 3.18026 13.4226 3.15157 13.5 3.12321V8.81917C13.366 8.88807 13.1923 8.96944 12.9825 9.05151C12.4127 9.27435 11.5825 9.49998 10.5568 9.49998C9.65149 9.49998 9.11435 9.17173 8.42753 8.74001L8.40495 8.72582C7.70405 8.28516 6.85285 7.75 5.5 7.75C4.25466 7.75 3.22521 8.08445 2.5 8.42432V2.38401ZM2.5 10.134V15.25V16H1V15.25V2V1.65215L1.26554 1.42746L1.75 2C1.26554 1.42746 1.26576 1.42728 1.26599 1.42709L1.26646 1.42668L1.26752 1.42579L1.27005 1.42367L1.27679 1.41807L1.29689 1.4017C1.31321 1.38857 1.33537 1.37107 1.36321 1.34985C1.41885 1.30743 1.49735 1.24998 1.59739 1.18261C1.79715 1.04807 2.08466 0.872716 2.44914 0.698399C3.17671 0.350428 4.22526 0 5.5 0C6.90437 0 7.9038 0.707694 8.66198 1.27418C8.72015 1.31765 8.77638 1.3599 8.831 1.40094C9.15213 1.64223 9.41729 1.84147 9.68987 1.99641C9.99337 2.16892 10.2476 2.25 10.5 2.25C11.2275 2.25 12.0715 2.03193 12.7695 1.79103C13.1109 1.67321 13.4025 1.55523 13.6079 1.46707C13.7104 1.42308 13.7908 1.38677 13.8446 1.36197C13.8714 1.34957 13.8916 1.34007 13.9044 1.33395L13.9182 1.32736L13.9206 1.32621L13.9208 1.32612L13.9209 1.32608L13.9209 1.32605L13.9211 1.32597L15 0.798502V2V9.24998V9.6392L14.6817 9.86326L14.25 9.24998C14.6817 9.86326 14.6815 9.86342 14.6813 9.86359L14.6808 9.86394L14.6797 9.86471L14.6771 9.86653L14.6702 9.87124L14.6502 9.88477C14.6341 9.89556 14.6123 9.90981 14.5851 9.92701C14.5307 9.96141 14.4542 10.0077 14.3569 10.0618C14.1624 10.1699 13.8834 10.3098 13.5289 10.4485C12.8202 10.7256 11.8039 11 10.5568 11C9.20395 11 8.35275 10.4648 7.65185 10.0242L7.62928 10.01C6.94245 9.57826 6.40532 9.25 5.5 9.25C4.50202 9.25 3.67557 9.52457 3.09633 9.8016C2.84672 9.92098 2.64568 10.0396 2.5 10.134ZM2.23212 10.3245C2.23169 10.3249 2.23159 10.325 2.23184 10.3248L2.23212 10.3245Z" fill="currentColor"/>')},44534:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(81580).A)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},56661:(e,t,r)=>{r.d(t,{Lb:()=>o});var a=r(6145);let l=(0,a.createServerReference)("40f1fabbe4668d2dc2b9b3cc631f3469bdcceaf26d",a.callServer,void 0,a.findSourceMapURL,"uploadAssetAction");var n=r(39149),i=r(70244);let s=["png","jpg","jpeg","webp"],o=e=>{let{initialImages:t,disableDrag:r=!1}=e,a=n.useRef(null),[o,d]=n.useState(!1),[u,m]=n.useState(!1),[p,f]=n.useState(()=>{var e;return null!==(e=null==t?void 0:t.map(e=>({id:crypto.randomUUID(),file:new File([],e.name),size:e.size,status:"success",url:e.url})))&&void 0!==e?e:[]}),g=n.useCallback(e=>{f(e.map(e=>({id:crypto.randomUUID(),file:new File([],e.name),size:e.size,status:"success",url:e.url})))},[]),h=n.useCallback(async e=>{if(p.length+e.length>1)return e.forEach(e=>{URL.revokeObjectURL(URL.createObjectURL(e))}),i.oR.error("File limit exceeded",{description:"You can only upload up to ".concat(1," images.")});if(e.find(e=>{var t;let r=null===(t=e.name.split(".").pop())||void 0===t?void 0:t.toLowerCase();return!r||!s.includes(r)}))return e.forEach(e=>{URL.revokeObjectURL(URL.createObjectURL(e))}),i.oR.error("Invalid file type",{description:"Allowed file types: ".concat(s.join(", "))});let t=e.find(e=>e.size>1048576);if(t)return e.forEach(e=>{URL.revokeObjectURL(URL.createObjectURL(e))}),i.oR.error("File too large",{description:"The file ".concat(t.name," is larger than ").concat("1 MB",".")});d(!0);let r=e.map(e=>({id:crypto.randomUUID(),file:e,status:"pending",url:URL.createObjectURL(e),size:e.size}));for(let e of(f(e=>[...e,...r]),r)){f(t=>t.map(t=>t.id===e.id?{...t,status:"uploading"}:t));try{let t=new FormData;t.append("file",e.file,e.file.name);let r=await l(t);if(r.error){f(t=>t.map(t=>t.id===e.id?{...t,status:"error",error:r.error}:t)),i.oR.error("Failed to upload file",{description:r.error});continue}let a=r.url;f(t=>t.map(t=>t.id===e.id?{...t,status:"success",url:a}:t))}catch(t){f(t=>t.map(t=>t.id===e.id?{...t,status:"error",error:"Upload failed"}:t))}}d(!1)},[p.length]),x=n.useCallback(async e=>{if(m(!1),o||(e.preventDefault(),e.stopPropagation(),!e.dataTransfer))return;let{files:t}=e.dataTransfer;c(t)&&await h(Array.from(t))},[h,o]);n.useEffect(()=>{if(r)return;let e=()=>m(!0),t=()=>m(!1),a=e=>{e.preventDefault(),e.stopPropagation()};return window.addEventListener("dragenter",e),document.documentElement.addEventListener("mouseleave",t),window.addEventListener("dragover",a),window.addEventListener("drop",x),()=>{window.removeEventListener("dragenter",e),document.documentElement.removeEventListener("mouseleave",t),window.removeEventListener("dragover",a),window.removeEventListener("drop",x)}},[r,x,h]);let v=async e=>{c(e.target.files)&&e.target.files&&await h(Array.from(e.target.files))},j=n.useCallback(e=>{f(t=>{let r=t.find(t=>t.id===e);return(null==r?void 0:r.url)&&URL.revokeObjectURL(r.url),t.filter(t=>t.id!==e)})},[]);return{files:p,setFiles:f,setInitialFiles:g,uploading:o,isDraggingFile:u,inputFileRef:a,onInputChange:v,removeFile:j}};function c(e){if(!(null==e?void 0:e.length))return!1;if(e.length>1)return i.oR.error("File limit exceeded",{description:"You can only upload up to ".concat(1," images at a time.")}),!1;for(let t of e)if(!t.type.startsWith("image/"))return i.oR.error("Invalid file type",{description:"Please upload image files only"}),!1;return!0}n.createContext({hasUploadedFile:!1,isUploadingFile:!1})},57027:(e,t,r)=>{r.r(t),r.d(t,{SWRDataProvider:()=>o});var a=r(27545),l=r(39149),n=r(51267),i=r(41664);let s=new WeakMap;function o(e){let{children:t,data:r}=e,{mutate:o}=(0,n.iX)(),c=(0,l.useRef)(r),[d,u]=(0,l.useState)(0);return(0,l.useEffect)(()=>{let e=!1;return(0,l.startTransition)(()=>{for(let t in c.current={...c.current},r){let a=r[t];if(a instanceof Promise&&s.has(a)&&(a=s.get(a)),a instanceof Promise){a.then(r=>{s.set(a,r),e||r===c.current[t]&&0!==d||(c.current[t]=r,o(t,Promise.resolve(r),!1))});continue}(a!==c.current[t]||0===d)&&(c.current[t]=a,o(t,Promise.resolve(a),!1))}for(let e in c)e in r||(delete c.current[e],o(e,Promise.resolve(void 0),!1));u(d+1)}),()=>{e=!0}},[r,o]),(0,a.jsx)(i.BE,{value:{fallback:function(e){let t={};for(let r in e){let a=e[r];a&&"object"==typeof a&&"function"==typeof a.then?t[r]=void 0:t[r]=a}return t}(c.current)},children:t})}},73090:(e,t,r)=>{r.d(t,{_:()=>a});let a=(0,r(69435).G)('<path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 2.5H1.5V9.18933L2.96966 7.71967L3.18933 7.5H3.49999H6.63001H6.93933L6.96966 7.46967L10.4697 3.96967L11.5303 3.96967L14.5 6.93934V2.5ZM8.00066 8.55999L9.53034 10.0897L10.0607 10.62L9.00001 11.6807L8.46968 11.1503L6.31935 9H3.81065L1.53032 11.2803L1.5 11.3106V12.5C1.5 13.0523 1.94772 13.5 2.5 13.5H13.5C14.0523 13.5 14.5 13.0523 14.5 12.5V9.06066L11 5.56066L8.03032 8.53033L8.00066 8.55999ZM4.05312e-06 10.8107V12.5C4.05312e-06 13.8807 1.11929 15 2.5 15H13.5C14.8807 15 16 13.8807 16 12.5V9.56066L16.5607 9L16.0303 8.46967L16 8.43934V2.5V1H14.5H1.5H4.05312e-06V2.5V10.6893L-0.0606689 10.75L4.05312e-06 10.8107Z" fill="currentColor"/>')},86611:(e,t,r)=>{r.d(t,{Kx:()=>c});var a=r(23338);a.z.object({id:a.z.string(),title:a.z.string(),description:a.z.string().min(3,"Please provide a description.").max(1e3,"Description cannot be longer than 1000 characters"),source:a.z.object({title:a.z.string(),url:a.z.string(),description:a.z.string().optional()}),code:a.z.string(),createdAt:a.z.string().or(a.z.number()),meta:a.z.object({project:a.z.string(),file:a.z.string()})}).pick({id:!0,title:!0,description:!0,source:!0,code:!0,createdAt:!0,meta:!0});let l=a.z.enum(["registry:style","registry:lib","registry:example","registry:block","registry:component","registry:ui","registry:hook","registry:theme","registry:page","registry:file","registry:internal"]),n=a.z.discriminatedUnion("type",[a.z.object({path:a.z.string(),content:a.z.string().optional(),type:a.z.enum(["registry:file","registry:page"]),target:a.z.string()}),a.z.object({path:a.z.string(),content:a.z.string().optional(),type:l.exclude(["registry:file","registry:page"]),target:a.z.string().optional()})]),i=a.z.object({config:a.z.object({content:a.z.array(a.z.string()).optional(),theme:a.z.record(a.z.string(),a.z.any()).optional(),plugins:a.z.array(a.z.string()).optional()}).optional()}),s=a.z.object({light:a.z.record(a.z.string(),a.z.string()).optional(),dark:a.z.record(a.z.string(),a.z.string()).optional()}),o=a.z.object({$schema:a.z.string().optional(),name:a.z.string(),type:l,title:a.z.string().optional(),author:a.z.string().min(2).optional(),description:a.z.string().optional(),dependencies:a.z.array(a.z.string()).optional(),devDependencies:a.z.array(a.z.string()).optional(),registryDependencies:a.z.array(a.z.string()).optional(),files:a.z.array(n).optional(),tailwind:i.optional(),cssVars:s.optional(),meta:a.z.record(a.z.string(),a.z.any()).optional(),docs:a.z.string().optional(),categories:a.z.array(a.z.string()).optional()});a.z.object({version:a.z.literal(2),id:a.z.string(),payload:o,source:a.z.object({title:a.z.string(),url:a.z.string(),description:a.z.string().optional()}),createdAt:a.z.string().or(a.z.number()),meta:a.z.object({project:a.z.string(),file:a.z.string()})}).pick({id:!0,version:!0,payload:!0,source:!0,createdAt:!0,meta:!0}),o.extend({meta:a.z.object({blockId:a.z.string().optional(),templateId:a.z.string().optional(),images:a.z.array(a.z.object({url:a.z.string(),name:a.z.string(),size:a.z.number()})).optional(),author:a.z.string().min(2,"Author is required and must be at least 2 characters long."),env:a.z.array(a.z.object({name:a.z.string(),url:a.z.string().optional()})).optional()})}),a.z.object({filename:a.z.string().min(1).max(100),file:a.z.instanceof(ArrayBuffer).refine(e=>e.byteLength>0).refine(e=>e.byteLength/1048576<=5)});let c=1e4;a.z.object({blockId:a.z.string(),title:a.z.string().max(50,"Title must be less than ".concat(50," characters.")),description:a.z.string().max(c,"Description must be less than ".concat(c," characters.")).optional(),imageUrl:a.z.string().url("Please upload an image for your template.").optional().or(a.z.literal("")),category:a.z.enum(["apps","blocks","components","games","sites"],{required_error:"Category is required",invalid_type_error:"Category is invalid"}),envVarKeys:a.z.array(a.z.string()).optional()}).extend({imageUrl:a.z.string().url("Please upload an image for your template.").nullable().optional()})},90003:(e,t,r)=>{r.d(t,{TemplateStatusBadge:()=>o});var a=r(27545),l=r(2006),n=r(3906),i=r(75838);let s={approved:["Published","blue"],rejected:["Changes Requested","red"],pending:["Pending Review","secondary"]};function o(e){let{status:t,className:r}=e,[o,c]=t&&t in s?s[t]:s.pending,{user:d}=(0,i.J)();return(null==d?void 0:d.isAdminMode)&&t?(0,a.jsx)(l.E,{size:"sm",className:(0,n.cn)(r),variant:c,children:o}):null}},95200:(e,t,r)=>{r.d(t,{TemplateEditButton:()=>U,TemplateEditDialog:()=>V,I:()=>S});var a=r(27545),l=r(39149),n=r(88704),i=r(97797),s=r(50403),o=r(20137),c=r(24595),d=r(41664),u=r(56661),m=r(88707),p=r(70244),f=r(6145);let g=(0,f.createServerReference)("40e0c5bbaf241dfe5b871701c6a0f21a375e27468d",f.callServer,void 0,f.findSourceMapURL,"editTemplateAction"),h=(0,f.createServerReference)("40f2ce8cc293a53412054ef421232fd417ecbc5832",f.callServer,void 0,f.findSourceMapURL,"deleteTemplateAction");var x=r(19159),v=r(26241),j=r(79603),b=r(35820),y=r(3906),z=r(35294),C=r(4432),k=r(85422),L=r(44534),N=r(27725),w=r(32638),D=r(25432),R=r(86611),I=r(65177),M=r(18387);function S(){let{data:e,mutate:t}=(0,d.Ay)("templateEditDialogOpen",null,{fallbackData:!1});return{templateEditDialogOpen:e,setTemplateEditDialogOpen:t}}function U(){let{setTemplateEditDialogOpen:e}=S();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.$,{onClick:()=>e(!0),size:"sm",className:"size-7 rounded-md px-0 sm:hidden",tooltip:"Settings",variant:"secondary",children:(0,a.jsx)(D.H,{})}),(0,a.jsx)(i.$,{onClick:()=>e(!0),size:"sm",className:"hidden sm:block",tooltip:"Settings",variant:"secondary",children:(0,a.jsx)(D.H,{})})]})}function V(e){var t;let{templateCanonId:r,blockId:d,title:f,description:b,category:y,imageUrl:D,shouldReturnToCreatedDialog:U=!1,activeBlock:V,envVarKeys:E}=e,{templateEditDialogOpen:A,setTemplateEditDialogOpen:F}=S(),{setTemplateCreatedDialogOpen:O}=(0,z.qn)(),P=(0,c.k)("templateShareDialog"),[H,B]=l.useTransition(),{files:K,setFiles:_,setInitialFiles:$,uploading:q,removeFile:Z,inputFileRef:G,onInputChange:Y}=(0,u.Lb)({initialImages:D?[{url:D,name:"Current Image"}]:[],disableDrag:!A}),[J,W]=(0,l.useState)({title:f,description:b,category:y,envVarKeys:E}),Q=(0,j.useRouter)(),X=(0,C.y6)(),{setTemplateCreatedInfo:ee}=(0,z._d)(),[et,er]=(0,l.useState)(null===D);l.useEffect(()=>{A||setTimeout(()=>{er(null===D),$(D?[{url:D,name:"Current Image"}]:[]),W({title:f,description:b,category:y,envVarKeys:E})},500)},[K,Z,_,$,F,A,f,b,y,D,er,E]);let ea=(0,l.useCallback)(()=>{B(async()=>{var e,t,r;let a=await g({...J,blockId:d,imageUrl:null!==(t=null===(e=K[0])||void 0===e?void 0:e.url)&&void 0!==t?t:null});if(a.error){p.oR.error(a.error);return}Q.refresh(),p.oR.success("Update successful"),F(!1),U&&(await ee({title:J.title,description:J.description,category:J.category,envVarKeys:J.envVarKeys,imageUrl:(null===(r=K[0])||void 0===r?void 0:r.url)||D||void 0}),setTimeout(()=>void O(!0),100))})},[K,Q,F,O,U,d,D,J,ee]),el=l.useCallback(()=>{B(async()=>{let e=await h(d);if(e.error){p.oR.error(e.error);return}p.oR.success("Deleted successfully"),await F(!1),U?setTimeout(()=>{V&&X({...V,templateCanonId:void 0,templateVersionId:void 0})},500):Q.push("/chat/community")})},[Q,F,d,V,X,U]),en=(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)(o.Label,{htmlFor:"title",className:"flex items-center gap-0.5 font-medium text-gray-900",children:[P("modalNameLabel"),(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(s.p,{autoComplete:"off",disabled:H,id:"title",maxLength:32,minLength:2,name:"title",onChange:e=>W(t=>({...t,title:e.target.value})),value:J.title,placeholder:P("modalNamePlaceholder"),required:!0,spellCheck:!1})]}),ei=(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(o.Label,{htmlFor:"description",className:"font-medium text-gray-900",children:P("modalDescriptionLabel")}),(0,a.jsx)(m.T,{asChild:!0,children:(0,a.jsx)(x.o,{className:"resize-y transition-colors",maxHeight:192,minHeight:80,disabled:H,id:"description",maxLength:R.Kx,name:"description",placeholder:P("modalDescriptionPlaceholder"),spellCheck:!1,onChange:e=>W(t=>({...t,description:e.target.value})),value:J.description||""})})]}),es=(0,a.jsx)("div",{className:"flex flex-col gap-2",children:(0,a.jsxs)(I.l6,{defaultValue:null!==(t=J.category)&&void 0!==t?t:void 0,disabled:H,onValueChange:e=>W(t=>({...t,category:e})),required:!0,children:[(0,a.jsxs)(o.Label,{htmlFor:"category",className:"font-medium text-gray-900",children:[P("modalCategoryLabel"),(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(I.bq,{id:"category",children:(0,a.jsx)(I.yv,{placeholder:"Select a category"})}),(0,a.jsx)(I.gC,{children:M.L.map(e=>(0,a.jsx)(I.eb,{value:e.value,children:e.text},e.value))})]})}),eo=(0,a.jsxs)("fieldset",{className:"flex flex-col items-start gap-2",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("legend",{className:"flex items-center gap-0.5 text-sm font-medium",children:P("modalImageLabel")}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:P("modalImageDescription")})]}),(0,a.jsx)("div",{className:"h-32 w-full",children:K.length||et?(0,a.jsxs)("div",{className:"flex h-full w-[169px] flex-col gap-2",children:[(0,a.jsx)("div",{className:"bg-muted relative flex-1 overflow-hidden rounded-md border",children:et?(0,a.jsx)("div",{className:"pointer-events-none aspect-video",children:(0,a.jsx)(w.TemplateImage,{templateCanonId:r,alt:"Template Preview",src:void 0})}):(0,a.jsx)("div",{className:"pointer-events-none aspect-video data-[status=uploading]:opacity-50","data-status":K[0].status,children:(0,a.jsx)(w.TemplateImage,{alt:K[0].file.name,src:K[0].url,templateCanonId:r})})}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2 text-sm font-medium",children:[(0,a.jsx)("div",{className:"min-w-0 flex-1 contain-inline-size",children:(0,a.jsx)("div",{className:"line-clamp-1 w-full break-all",children:et?(0,a.jsx)("span",{children:"Current Image"}):(0,a.jsx)("span",{children:K[0].file.name})})}),(0,a.jsxs)(k.DropdownMenu,{children:[(0,a.jsx)(k.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsx)(i.$,{variant:"ghost",size:"xs",className:"size-6 rounded-md p-0",children:(0,a.jsx)(L.A,{className:"size-4"})})}),(0,a.jsx)(k.DropdownMenuContent,{align:"start",children:(0,a.jsx)(k.DropdownMenuGroup,{children:(0,a.jsxs)(k.DropdownMenuItem,{onClick:()=>et?er(!1):Z(K[0].id),variant:"destructive",children:[(0,a.jsx)(N.l,{}),(0,a.jsx)("span",{children:"Remove Image"})]})})})]})]})]}):(0,a.jsxs)("label",{className:"hover:bg-muted data-[dragging=true]:bg-muted flex size-full cursor-pointer flex-col gap-1 rounded-md border border-dashed p-4 transition-colors duration-200",children:[(0,a.jsx)("div",{className:"pointer-events-none flex min-h-24 flex-col items-center justify-center text-sm",children:(0,a.jsx)("div",{className:"text-gray-500",children:P("modalImagePlaceholder")})}),(0,a.jsx)("input",{accept:"image/*",className:"sr-only",max:1,type:"file",onChange:Y,ref:G})]})})]}),ec=E.length?(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(o.Label,{htmlFor:"envVarKeys",className:"flex items-center gap-0.5 font-medium text-gray-900",children:"Environment Variables"}),(0,a.jsx)("div",{className:"flex flex-col gap-2",children:E.map((e,t)=>(0,a.jsx)(s.p,{autoComplete:"off",disabled:H,id:"envVarKeys-".concat(t),maxLength:32,minLength:2,name:"envVarKeys-".concat(t),placeholder:"KEY",required:!0,spellCheck:!1,value:J.envVarKeys[t],onChange:e=>{let r=[...J.envVarKeys];r[t]=e.target.value,W(e=>({...e,envVarKeys:r}))}},t))})]}):null,ed=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.$,{className:"mr-auto",onClick:el,disabled:H||q,variant:"ghost",size:"sm",children:(0,a.jsx)("span",{children:"Delete"})}),(0,a.jsx)(n.ModalClose,{asChild:!0,children:(0,a.jsx)(i.$,{size:"sm",variant:"secondary",disabled:H||q,onClick:()=>{F(!1),U&&setTimeout(()=>void O(!0),100)},children:P("modalCancelButton")})}),(0,a.jsx)(v.Q,{form:"template-edit-dialog",size:"sm",pending:H||q,children:(0,a.jsx)("span",{children:"Update"})})]});return(0,a.jsxs)(n.Modal,{open:A,onOpenChange:F,onInteractOutside:e=>{(H||q)&&e.preventDefault()},className:"flex flex-col md:max-h-[90vh]",children:[(0,a.jsx)(n.ModalHeader,{children:(0,a.jsx)(n.ModalTitle,{children:(0,a.jsx)("span",{children:"Edit Details"})})}),(0,a.jsx)(T,{children:(0,a.jsxs)("form",{className:"flex flex-col gap-4",id:"template-edit-dialog",onSubmit:e=>{e.preventDefault(),ea()},children:[en,ei,es,ec,eo]})}),(0,a.jsx)("div",{className:"bg-muted border-alpha-400 sticky bottom-0 flex w-full items-center justify-end gap-2 border-t p-4 pl-3",children:ed})]})}function T(e){let{children:t}=e,{showTopBorder:r,containerRef:l,topRef:i,bottomRef:s}=(0,b.Y)();return(0,a.jsx)(n.ModalContent,{ref:l,className:(0,y.cn)("flex flex-col overflow-y-auto border-t border-transparent transition-[border-color]",r&&"border-gray-200"),children:(0,a.jsxs)("div",{className:"relative flex h-fit w-full flex-col gap-4",children:[(0,a.jsx)("div",{ref:i,className:"absolute inset-x-0 top-0 h-px w-full"}),t,(0,a.jsx)("div",{ref:s,className:"absolute inset-x-0 bottom-0 h-px w-full"})]})})}},95547:(e,t,r)=>{r.d(t,{S:()=>a});let a=r(70492).g}}]);